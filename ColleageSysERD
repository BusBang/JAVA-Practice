/*
예제 1) 학원시스템 설계
DB설계에 대한 의뢰가 하나 들어왔다.
학원시스템에 관련하여 개발하고자 한다.
해당 학원에는 많은 과목이 존재하고 과목코드, 과목명이 있다.
과목에 따라 여러 강좌를 개강하기 위해서는 과목과 강사 정보가 필요하며
강좌마다 강좌번호가 있으며, 하나의 강좌당 한명의 강사가 배치된다.
강좌 정보는 요일,교시,강의시간(총 강의시간)을 기록할 수 있어야 한다.
해당 학원은 강사를 관리하며, 강사는 강사별 ID,이름,전화번호, 주소를 관리 한다.
또한 학생들도 관리하며 학생은 학생별 ID,이름,전화번호,주소를 관리 한다.
학생들은 강좌를 듣기 위해 수강신청을 할 수 있다.
수강신청시 필요한 정보는 강좌번호와 학생 ID가 필요하다.

--학원테이블설계

과목 SUBJECT
-과목코드	/ SUB_CODE	CHAR(5)		PRIMARY KEY,
-과목명		/ SUB_NAME	VARCHAR2(50)	NOT NULL

강좌 LECTURE
-강좌번호	/ LEC_CODE	CHAR(5)		PRIMARY KEY,
-강좌이름	/ LEC_NAME	VARCHAR2(50)	NOT NULL,
-강사번호	/ INS_ID	NUMBER		REFERENCES INSTRUCTOR(INS_ID),
-과목코드	/ SUB_CODE	CHAR(5)		REFERENCES SUBJECT(SUB_CODE),
-요일		/ DAY		DATE		NOT NULL,
-교시		/ PERIOD	NUMBER		NOT NULL,
-강의시간	/ TIME 		NUMBER		NOT NULL

수강신청 ENROLL
-수강신청번호	/
-강좌번호	/ LEC_CODE	CHAR(5)		REFERENCES LECTURE(LEC_CODE),
-학생ID		/ STU_ID	NUMBER		REFERENCES STUDENT(STU_ID),

강사 INSTRUCTOR
-강사ID		/ INS_ID	NUMBER		PRIMARY KEY,
-강사이름	/ INS_NAME	VARCHAR2(20)	NOT NULL,	
-전화번호	/ INS_PHONE	CHAR(13)	DEFAULT '010-0000-0000',
-주소		/ INS_ADDR	VARCHAR2(500)	NOT NULL

학생 STUDENT
-학생ID		/ STU_ID 	NUMBER		PRIMARY KEY,
-이름		/ STU_NAME	VARCHAR2(20)	NOT NULL,
-전화번호	/ STU_PHONE	CHAR(13)	DEFAULT	'010-0000-0000',
-주소		/ STU_ADDR	VARCHAR2(500)	NOT NULL
*/

-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- SUBJECT Table Create SQL
CREATE TABLE SUBJECT
(
    SUB_CODE    CHAR(5)         NOT NULL, 
    SUB_NAME    VARCHAR2(50)    NULL, 
    CONSTRAINT SUBJECT_PK PRIMARY KEY (SUB_CODE)
)


-- SUBJECT Table Create SQL
CREATE TABLE INSTRUCTOR
(
    INS_ID       NUMBER           NOT NULL, 
    INS_NAME     VARCHAR2(20)     NOT NULL, 
    INS_PHONE    CHAR(13)         NULL, 
    INS_ADDR     VARCHAR2(500)    NOT NULL, 
    CONSTRAINT INSTRUCTOR_PK PRIMARY KEY (INS_ID)
)

CREATE SEQUENCE INSTRUCTOR_SEQ
START WITH 1
INCREMENT BY 1;


-- SUBJECT Table Create SQL
CREATE TABLE LECTURE
(
    LEC_CODE    CHAR(5)         NOT NULL, 
    LEC_NAME    VARCHAR2(50)    NOT NULL, 
    INS_ID      NUMBER          NULL, 
    SUB_CODE    CHAR(5)         NULL, 
    DAY         DATE            NOT NULL, 
    PERIOD      NUMBER          NOT NULL, 
    TIME        NUMBER          NOT NULL, 
    CONSTRAINT LECTURE_PK PRIMARY KEY (LEC_CODE)
)


-- SUBJECT Table Create SQL
CREATE TABLE STUDENT
(
    STU_ID       NUMBER           NOT NULL, 
    STU_NAME     VARCHAR2(20)     NOT NULL, 
    STU_PHONE    CHAR(13)         NULL, 
    STU_ADDR     VARCHAR2(500)    NOT NULL, 
    CONSTRAINT STUDENT_PK PRIMARY KEY (STU_ID)
)
/

CREATE SEQUENCE STUDENT_SEQ
START WITH 1
INCREMENT BY 1;
/


-- SUBJECT Table Create SQL
CREATE TABLE ENROLL
(
    LEC_CODE    CHAR(5)    NOT NULL, 
    STU_ID      NUMBER     NOT NULL, 
    CONSTRAINT ENROLL_PK PRIMARY KEY (LEC_CODE, STU_ID)
)


ALTER TABLE ENROLL
    ADD CONSTRAINT FK_ENROLL_LEC_CODE_LECTURE_LEC FOREIGN KEY (LEC_CODE)
        REFERENCES LECTURE (LEC_CODE)
/

ALTER TABLE ENROLL
    ADD CONSTRAINT FK_ENROLL_STU_ID_STUDENT_STU_I FOREIGN KEY (STU_ID)
        REFERENCES STUDENT (STU_ID)
/


------------------------


